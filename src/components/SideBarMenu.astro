---
const { sideBarActiveItemID } = Astro.props;
const activeClass = "bg-base-300"; // For primary color replace with `active` class
---

<ul class="menu grow shrink menu-md overflow-y-auto">
    <li><a class="py-3 text-base" id="home" href="/#home">Home</a></li>
    <li><a class="py-3 text-base" id="projects" href="/#projects">Projects</a></li>
    <li><a class="py-3 text-base" id="services" href="/#writings">Writings</a></li>
    <li><a class="py-3 text-base" id="cv" href="/#cv">CV</a></li>
    <li>
        <a
            class="py-3 text-base"
            href="/#contact"
            target="_blank"
            referrerpolicy="no-referrer-when-downgrade">Let's Talk</a
        >
    </li>
</ul>

<script define:vars={{ sideBarActiveItemID: sideBarActiveItemID, activeClass: activeClass }}>
document.addEventListener('DOMContentLoaded', () => {
    const sections = document.querySelectorAll('section[id]');
    const navLinks = document.querySelectorAll('.nav-link');
    const activeClass = 'bg-base-300';

    // Smooth scroll functionality
    navLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const targetId = link.getAttribute('href').substring(2);
        const targetSection = document.getElementById(targetId);
        if (targetSection) {
          targetSection.scrollIntoView({ behavior: 'smooth' });
        }
      });
    });

    // Active section highlighting
    function highlightNavigation() {
      const scrollPosition = window.scrollY + 100; // Offset for better highlighting

      sections.forEach(section => {
        const sectionTop = section.offsetTop;
        const sectionHeight = section.offsetHeight;
        const sectionId = section.getAttribute('id');
        const correspondingLink = document.querySelector(`.nav-link[href="/#${sectionId}"]`);

        if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
          navLinks.forEach(link => link.classList.remove(activeClass));
          correspondingLink?.classList.add(activeClass);
        }
      });
    }

    // Initial highlight
    highlightNavigation();

    // Update highlight on scroll
    window.addEventListener('scroll', highlightNavigation);
  });
</script>                                                                                                               